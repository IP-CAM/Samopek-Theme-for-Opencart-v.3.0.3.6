(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{1049:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(42),i=(o=r(1141))&&o.__esModule?o:{default:o},a=r(59);var s=r(62),l=r(182).getConversation,c=r(463),u=function(e){var t=c(e)[0];return{isFetching:t.isFetching,isFetched:!(0,a.isPartiallyFetched)(t),conversation:t}};t.mapStateToProps=u;var d=function(t){return{onFetch:function(e){t(l(s,e))}}};t.mapDispatchToProps=d;var p=function(e,t,r){return Object.assign({},e,t,r,{onFetch:function(){t.onFetch(e.conversation.id)}})};t.mergeProps=p;var f=(0,n.connect)(u,d,p)(i.default);t.default=f},1050:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(725)),a=n(r(1258)),s=r(1261);function n(e){return e&&e.__esModule?e:{default:e}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return c(l(o=n.call.apply(n,[this].concat(t))||this),"state",{width:0,height:0}),c(l(o),"handleMeasurementChange",function(e){var t=e.width,r=e.height;o.setState({width:t,height:r})}),o}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){var t=this;return o.default.createElement(s.NotificationsStyledFrame,{frameName:"intercom-notifications-frame",width:this.state.width,height:this.state.height},function(e){return o.default.createElement(i.default,{onChange:t.handleMeasurementChange},o.default.createElement(a.default,{frameWindow:e}))})},r}(o.Component);t.default=u},1051:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapStateToProps=void 0;var o=r(42),n=a(r(1097)),i=r(1096),c=r(132),u=a(r(871));function a(e){return e&&e.__esModule?e:{default:e}}var d=r(23),s=r(62),l=r(183).openConversation,p=r(1262),f=p.openMessage,h=p.closeMessage,m=r(182),v=m.markConversationAsRead,y=m.getConversation,g=m.createReaction,b=r(774).dismissPointerMessage,O=function(e){var t=e.user.isPresent,r=e.app,o=r.name,n=r.userConversationAttachmentsEnabled,i=r.userConversationGifsEnabled,a=(0,u.default)(e),s=a[0],l=d.isMobileBrowser();return{appName:o,conversation:s,part:a[0].parts[0],userIsPresent:t,isMobile:l,showUploadButton:n,showGifButton:i,shouldShowUpfrontEmailComposer:(0,c.shouldShowUpfrontEmailSelector)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.mapStateToProps=O;var C=(0,o.connect)(O,function(r){return{onOpen:function(e,t){r(f(e,t))},onClose:function(e){r(h()),r(b(e))},onConversationRead:function(e){r(v(s,e))},onComposerOrFormInputClick:function(e){r(h()),r(b(e)),r(l(e)),r(y(s,e))},onReactionSelect:function(e,t){r(g(s,e,t,!1))}}},i.mergeProps)(n.default);t.default=C},1052:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(42),l=r(797),i=r(464),a=(o=r(1263))&&o.__esModule?o:{default:o};var s=function(e){var t=(0,l.activeTourSelector)(e),r=(0,l.activeTourStepSelector)(e),o=(0,l.activeTourStepIndex)(e),n=(0,l.activeTourStepCount)(e),i=(0,l.activeTourAuthor)(e),a=(0,l.isPreviewingTourSelector)(e),s=e.app.name;return{activeTourId:t.id,activeStep:r,activeStepIndex:o,stepCount:n,appName:s,author:i,isPreviewingTour:a}};t.mapStateToProps=s;var c=function(e){return{onContinue:function(){e((0,i.progressTour)())},onStop:function(){e((0,i.stopTour)())},onComplete:function(){e((0,i.completeTour)())},onFailure:function(){e((0,i.recordFailure)())}}};t.mapDispatchToProps=c;var u=(0,n.connect)(s,c)(a.default);t.default=u},1096:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(42),i=(o=r(1097))&&o.__esModule?o:{default:o},p=r(132),f=r(59);var a=r(62),h=r(23),s=r(720),l=s.openMessage,c=s.closeMessage,u=s.recordMessageSent,d=r(183).openConversation,m=r(182),v=m.markConversationAsRead,y=m.getConversation,g=m.createReaction,b=r(463),O=function(e){var t,r=e.user.isPresent,o=e.app,n=o.name,i=o.userConversationAttachmentsEnabled,a=o.userConversationGifsEnabled,s=e.message.partId,l=b(e)[0],c=h.isMobileBrowser(),u=void 0!==s?l.parts.find(function(e){return e.id===s}):(t=l).readAt?(0,f.messageOrAdminReply)(t):(0,f.getFirstAdminPart)(t),d=u.messageType;return d=d||"adminReply",{appName:n,conversation:l,part:u=Object.assign({},u,{messageType:d}),userIsPresent:r,isMobile:c,showUploadButton:i,showGifButton:a,shouldShowUpfrontEmailComposer:(0,p.shouldShowUpfrontEmailSelector)(e),isUpfrontEmailComposerShowing:e.app.upfrontEmailCollection.upfrontEmailCollectorShowing}};t.mapStateToProps=O;var C=function(r){return{onOpen:function(e,t){r(l(e,t)),r(u(e,t))},onClose:function(){r(c())},onConversationRead:function(e){r(v(a,e))},onComposerOrFormInputClick:function(e){r(c()),r(d(e)),r(y(a,e))},onReactionSelect:function(e,t){r(g(a,e,t,!1))}}};t.mapDispatchToProps=C;var w=function(r,o,e){return Object.assign({},r,o,e,{onOpen:function(){var e=r.conversation,t=r.part;o.onOpen(e.id,t.id)},onConversationRead:function(){o.onConversationRead(r.conversation.id)},onComposerOrFormInputClick:function(){o.onComposerOrFormInputClick(r.conversation.id)},onReactionSelect:function(e){o.onReactionSelect(r.conversation.id,e)},onClose:function(){var e=r.conversation;o.onClose(e.id)}})};t.mergeProps=w;var _=(0,n.connect)(O,C,w)(i.default);t.default=_},1097:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),h=n(r(1142)),m=n(r(1185)),v=n(r(1189)),y=n(r(1110)),g=n(r(1200)),b=n(r(1209));function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=function(o){var e,t;function r(){for(var a,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return s(i(a=o.call.apply(o,[this].concat(t))||this),"addMessageMetric",function(e){var t=a.props,r=t.conversation,o=t.part,n=o.id,i=o.messageType;a.context.addMetric(e,"message","in_app","from_full",{conversation_id:r.id,message_id:n,message_type:i})}),s(i(a),"handleDismissClick",function(){a.addMessageMetric("closed"),a.props.onClose()}),a}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){var e=this.props,t=e.conversation,r=e.userIsPresent,o=e.onOpen,n=e.onConversationRead;o(),!t.read&&r&&n(),this.addMessageMetric("received")},n.componentDidUpdate=function(){var e=this.props,t=e.userIsPresent,r=e.conversation;t&&!r.read&&this.props.onConversationRead()},n.render=function(){var e=this.props,t=e.appWindow,r=e.conversation,o=e.part,n=e.appName,i=e.isMobile,a=e.onComposerOrFormInputClick,s=e.onReactionSelect,l=e.showUploadButton,c=e.showGifButton,u=e.shouldShowUpfrontEmailComposer,d=o.messageType,p=o.reactionsReply;switch(d){case"adminReply":case"link":case"messengerCard":case"notificationChannels":case"attributeCollector":case"conversationRating":case"chat":return i?f.default.createElement(h.default,{appName:n,part:o,onClose:this.handleDismissClick,composerState:r.composerState,onComposerOrFormInputClick:a}):f.default.createElement(b.default,{conversation:r,part:o,onClose:this.handleDismissClick,showReplyToButton:u,onComposerClick:a});case"video":return f.default.createElement(g.default,{conversation:r,standalone:!0,part:o,onClose:this.handleDismissClick,onComposerOrFormInputClick:a});case"note":return f.default.createElement(m.default,{conversationId:r.id,appName:n,message:o,reactionsReply:p,showUploadButton:l,showGifButton:c,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:u});case"post":return f.default.createElement(y.default,{conversationId:r.id,appName:n,message:o,reactionsReply:p,onClose:this.handleDismissClick,onComposerClick:a,onReactionSelect:s,showReplyToButton:u});case"pointer":return f.default.createElement(v.default,{appWindow:t,appName:n,message:o,conversationId:r.id,reactionsReply:p,onComposerClick:a,onReactionSelect:s,onClose:this.handleDismissClick})}},r}(f.Component);(t.default=a).propTypes={appWindow:o.default.object,conversation:o.default.shape({read:o.default.bool.isRequired}).isRequired,part:o.default.shape({messageType:o.default.string}).isRequired,appName:o.default.string.isRequired,isMobile:o.default.bool.isRequired,userIsPresent:o.default.bool.isRequired,onConversationRead:o.default.func.isRequired,onOpen:o.default.func.isRequired,onClose:o.default.func.isRequired,onComposerOrFormInputClick:o.default.func.isRequired,onReactionSelect:o.default.func.isRequired,showUploadButton:o.default.bool,showGifButton:o.default.bool,shouldShowUpfrontEmailComposer:o.default.bool},a.contextTypes={addMetric:o.default.func}},1109:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=n(r(193)),i=n(r(417)),d=o(r(1)),a=n(r(1192)),p=n(r(1193)),c=r(48),u=o(r(1194)),s=o(r(1195)),f=r(1196),h=r(1198);function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(e){y(t,e,r[e])})}return t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y(v(o=n.call.apply(n,[this].concat(t))||this),"arrow",void 0),y(v(o),"node",void 0),y(v(o),"arrowContainer",void 0),y(v(o),"positioner",void 0),y(v(o),"IntersectionObserver",void 0),y(v(o),"missingSelectorTimeout",void 0),y(v(o),"scrollIntoViewTimeout",void 0),y(v(o),"state",{styles:null,arrowStyles:null,hide:!1,nodeInViewPort:!1,positionerOffsetForMask:{left:0,top:0},placement:null}),y(v(o),"targetWithClickHandler",null),y(v(o),"updateElementPosition",function(e){var t=e.styles,r=e.arrowStyles;return o.setState({styles:t,arrowStyles:r,hide:!o.targetIsVisible()}),e.attributes&&o.applyAttributes(e.attributes),e}),y(v(o),"handleOverlayClick",function(){o.scrollIntoView(),o.props.onOverlayClick&&o.props.onOverlayClick()}),y(v(o),"handleTargetClick",function(){o.props.onTargetClick&&o.props.onTargetClick()}),y(v(o),"handlePlacementChange",function(){o.props.onPlacementChange&&o.state.placement&&o.props.onPlacementChange(o.state.placement)}),y(v(o),"renderOverlay",function(){var e=o.getTargetNode();return o.props.renderOverlay(o.handleOverlayClick,o.props,e)}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){this.initializeIntersectionObserver(),this.initializePositioner(),this.setupTargetClickHandler()},o.shouldComponentUpdate=function(e,t){return!(0,i.default)(this.props,e)||!(0,i.default)(this.state,t)},o.componentDidUpdate=function(e,t){e.targetSelector!==this.props.targetSelector?(this.reinitializeIntersectionObserver(),this.reinitializePointer(),this.setupTargetClickHandler()):this.positioner?this.positioner.scheduleUpdate():this.initializePositioner(),t.placement!==this.state.placement&&this.handlePlacementChange()},o.componentWillUnmount=function(){var e=this.props.appWindow;this.destroyIntersectionObserver(),this.destroyPositioner(),this.destroyTargetClickHandler(),(0,u.RemoveIntersectionWindowContext)(e),(0,s.removeScrollIntoViewPolyfill)(e),this.missingSelectorTimeout&&clearTimeout(this.missingSelectorTimeout),this.scrollIntoViewTimeout&&clearTimeout(this.scrollIntoViewTimeout)},o.getTargetNode=function(){var e=this.props,t=e.targetSelector,r=e.appWindow;try{return r.document.querySelector(t)}catch(e){return null}},o.setupTargetClickHandler=function(){this.destroyTargetClickHandler(),this.targetWithClickHandler=this.getTargetNode(),this.targetWithClickHandler&&(0,c.addEventListener)(this.targetWithClickHandler,"click",this.handleTargetClick)},o.destroyTargetClickHandler=function(){this.targetWithClickHandler&&(0,c.removeEventListener)(this.targetWithClickHandler,"click",this.handleTargetClick)},o.storeMaskOffsetsBasedOnFlipPosition=function(e){if(this.props.scrollable){var t=e["x-placement"];switch(t){case"bottom":this.setState({placement:t,positionerOffsetForMask:{left:0,top:3}});break;case"top":this.setState({placement:t,positionerOffsetForMask:{left:0,top:-3}});break;case"left":this.setState({placement:t,positionerOffsetForMask:{left:-5,top:0}});break;case"right":this.setState({placement:t,positionerOffsetForMask:{left:3,top:0}});break;default:return}}},o.applyAttributes=function(r){var e=this;[this.arrowContainer,this.node].forEach(function(t){t&&"function"==typeof t.querySelectorAll&&Object.keys(r).forEach(function(e){t&&t.setAttribute&&t.setAttribute(e,r[e])}),e.storeMaskOffsetsBasedOnFlipPosition(r)})},o.targetIsVisible=function(){if(!this.state.nodeInViewPort)return!1;var e=this.getTargetNode();return(0,c.nodeIsVisible)(e)},o.scrollIntoView=function(){var t=this,e=this.props.appWindow;(0,s.default)(e);var r=this.getTargetNode();this.scrollIntoViewTimeout=setTimeout(function(){var e=t.state.nodeInViewPort;r&&!e&&r.intercomScrollIntoView({behavior:"smooth",block:"center",inline:"center"})},200)},o.initializePositioner=function(){var e=this.props.scrollable,t=this.getTargetNode();t&&this.node&&(e&&this.scrollIntoView(),this.positioner=new a.default(t,this.node,{positionFixed:!1,placement:"auto",modifiers:{applyStyle:{enabled:!1},preventOverflow:{boundariesElement:"viewport"},arrow:{enabled:!0,element:this.arrow,fn:f.arrowFnModifier},updateElementPosition:{enabled:!0,fn:this.updateElementPosition,order:900}}}))},o.initializeIntersectionObserver=function(){var a=this,e=this.props.appWindow,s=this.getTargetNode();s&&(e.IntercomIntersectionObserver||(0,u.default)(e),this.IntersectionObserver=new e.IntercomIntersectionObserver(function(e){if(0!==e.length){var t=(0,l.default)(e,["time"],["desc"])[0],r=t.isIntersecting,o=t.intersectionRatio,n=r&&.5<=o,i=n&&(0,c.nodeIsVisible)(s);a.setState({hide:!i,nodeInViewPort:n})}},{threshold:.5}),this.IntersectionObserver.observe(s))},o.destroyPositioner=function(){this.positioner&&this.positioner.destroy()},o.destroyIntersectionObserver=function(){this.IntersectionObserver&&this.IntersectionObserver.disconnect()},o.reinitializePointer=function(){this.destroyPositioner(),this.initializePositioner()},o.reinitializeIntersectionObserver=function(){this.destroyIntersectionObserver(),this.initializeIntersectionObserver()},o.mergedStyles=function(){var e=this.props.scrollable,t=this.state,r=t.styles,o=t.positionerOffsetForMask;if(!r)return{};if(!e)return r;var n=o.left,i=o.top;return m({},r,{left:r.left+n,top:r.top+i})},o.nodeIsVisible=function(){var e=this.getTargetNode();return e&&(0,c.nodeIsVisible)(e)},o.getStyles=function(){var e=this.props.childDimensions||{},t=e.height,r=e.width;if(this.nodeIsVisible()){var o=!this.state.hide&&t&&r?1:0;return this.onSelectorMatch(),m({},this.mergedStyles(),{opacity:o})}if(this.props.renderFallback)return this.onMissingSelector(),{position:"fixed",top:"calc(50% - "+(t||0)/2+"px)",left:"calc(50% - "+(r||0)/2+"px)"}},o.getArrowStyles=function(){var e=this.state,t=e.arrowStyles,r=e.hide,o=this.props.childDimensions||{},n=o.height,i=o.width,a=!r&&n&&i?1:0;return t?{top:t.top,left:t.left,opacity:a}:{opacity:a}},o.getMaskStyles=function(){var e=this.getTargetNode();if(!e||!this.props.scrollable||this.state.hide)return{};var t=e.getBoundingClientRect(),r=t.top,o=t.left,n=t.width,i=t.height,a=this.props.appWindow;return{padding:3,top:r-3+a.pageYOffset,left:o-3+a.pageXOffset,width:n,height:i}},o.renderArrow=function(){var t=this;return d.default.createElement(h.ArrowWrapperStyled,{className:"intercom-positioner-arrow-wrapper",style:m({},this.getArrowStyles()),ref:function(e){return t.arrow=e}},d.default.createElement(h.ArrowFrameStyled,{frameName:"intercom-positioner-arrow-frame",className:"intercom-positioner-arrow-frame"},function(){return d.default.createElement("div",{className:"intercom-positioner-arrow",style:{display:t.props.hideArrow?"none":"block"},ref:function(e){return t.arrowContainer=e}})}))},o.onMissingSelector=function(){var e=this;this.missingSelectorTimeout=setTimeout(function(){!e.nodeIsVisible()&&e.props.onMissingSelector&&e.props.onMissingSelector()},300)},o.onSelectorMatch=function(){this.props.onSelectorMatch&&this.props.onSelectorMatch()},o.render=function(){var t=this,e=this.props,r=e.scrollable,o=e.shouldAnimate,n=e.renderFallback,i=e.children,a=e.appWindow,s=this.getTargetNode();if(!s&&!n)return null;var l=this.getMaskStyles(),c=l.width,u=l.height;return d.default.createElement(p.default,{appWindow:a},d.default.createElement(d.default.Fragment,null,d.default.createElement(h.PositionerStyled,{ref:function(e){return t.node=e},className:"intercom-positioner-wrapper",style:this.getStyles()},d.default.createElement("div",{className:"intercom-positioner-animation-wrapper"},this.nodeIsVisible()?this.renderArrow():null,this.targetIsVisible()||n?i:null)),d.default.createElement(h.PositionerMaskStyled,{className:"intercom-positioner-mask",style:l,isStep:r&&!!s,isPost:r&&!s,isAnimating:o,height:u,width:c}),this.renderOverlay()))},r}(d.Component);y(t.default=g,"defaultProps",{hideArrow:!1,renderFallback:!1,shouldAnimate:!1,renderOverlay:function(e,t){var r=t.scrollable;return d.default.createElement(h.OverlayStyled,{onClick:e,scrollable:r,tabIndex:"-1"})}})},1113:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedBorderlessConversation=t.default=t.PARTS_BODY_PADDING=void 0;var o=y(r(22)),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),p=y(r(1114)),i=y(r(1086)),l=y(r(1240)),a=y(r(1253)),s=y(r(794)),c=y(r(14)),u=r(43),f=r(59),n=y(r(1122)),h=y(r(1085)),m=y(r(727)),v=r(730);function y(e){return e&&e.__esModule?e:{default:e}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}t.PARTS_BODY_PADDING=20;var O=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return b(g(o=n.call.apply(n,[this].concat(t))||this),"state",{isEmojiPickerOpen:!1,isGifPickerOpen:!1,isHeaderVisible:!1,headerHeight:50,partsHeight:0,quickRepliesHeight:0,composerHeight:0,replyToButtonHeight:0}),b(g(o),"handlePartsHeightChange",function(e){o.setState({partsHeight:e},o.handleHeightChange)}),b(g(o),"handleQuickRepliesShow",function(e){o.setState({quickRepliesHeight:e},o.handleHeightChange)}),b(g(o),"handleQuickRepliesHide",function(){o.setState({quickRepliesHeight:0},o.handleHeightChange)}),b(g(o),"handleComposerShow",function(e){o.setState({composerHeight:e},o.handleHeightChange)}),b(g(o),"handleComposerHide",function(){o.setState({composerHeight:0},o.handleHeightChange)}),b(g(o),"handleReplyToButtonShow",function(e){o.setState({replyToButtonHeight:e},o.handleHeightChange)}),b(g(o),"handleClick",function(){var e=o.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen;t?o.setState({isEmojiPickerOpen:!1}):r&&o.setState({isGifPickerOpen:!1})}),b(g(o),"handleDismissClick",function(e){e.stopPropagation(),o.addCloseMetric(),o.props.onClose();var t=(0,v.launcherFirstFocusableElement)();t&&t.focus()}),b(g(o),"handleEmojiPickerToggle",function(){var e=!o.state.isEmojiPickerOpen;o.setState({isEmojiPickerOpen:e}),o.props.onPopoverToggle(e)}),b(g(o),"handleGifPickerToggle",function(){var e=!o.state.isGifPickerOpen;o.setState({isGifPickerOpen:e}),o.props.onPopoverToggle(e)}),b(g(o),"handleMouseEnter",function(){o.setState({isHeaderVisible:!0})}),b(g(o),"handleMouseLeave",function(){o.setState({isHeaderVisible:!1})}),b(g(o),"handleViewMoreClick",function(){o.addViewMoreMetric(),o.props.onViewMore()}),b(g(o),"handleHeightChange",function(){o.props.onHeightChange(o.getHeight())}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){this.props.onOpen(),this.focusTrap=new m.default({document:this.props.frameWindow.document})},o.componentDidUpdate=function(e){var t=this.props.conversation;"all"===t.fetchState&&(0,f.getAdminPartCount)(t)>(0,f.getAdminPartCount)(e.conversation)&&this.addReplyMetric(t)},o.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},o.getHeight=function(){var e=this.state;return e.headerHeight+e.partsHeight+e.composerHeight+e.quickRepliesHeight+e.replyToButtonHeight+20},o.getStyle=function(){return{height:this.getHeight()}},o.getHeaderClassName=function(){return(0,c.default)({"intercom-borderless-header":!0,"intercom-borderless-header-visible":this.state.isHeaderVisible})},o.getClassName=function(){return(0,c.default)({"intercom-borderless":!0,"intercom-borderless-left-aligned":"left"===this.props.alignment,"intercom-borderless-has-composer":this.hasComposer()})},o.hasComposer=function(){var e=this.props.conversation,t=e.parts,r=e.composerState;return"attribute_collector"===t[0].replyType||r.visible},o.shouldRenderHeader=function(){var e=this.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen;return!(t||r)},o.addViewMoreMetric=function(){this.context.addMetric("clicked","viewmore_button","borderless","",{conversation_id:this.props.conversation.id})},o.addReplyMetric=function(){var e=this.props.conversation,t=(0,f.getLastAdminPart)(e);this.context.addMetric("received","reply","borderless","",{conversation_id:e.id,part_id:t.id,part_type:"adminReply",reply_type:t.replyType})},o.addCloseMetric=function(){this.context.addMetric("closed","borderless","borderless","from_close_button",{conversation_id:this.props.conversation.id})},o.renderHeader=function(){var t=this;return d.default.createElement("div",{className:this.getHeaderClassName()},d.default.createElement("div",{className:"intercom-borderless-button-wrapper"},this.props.hasHistory?this.renderViewMoreButton():null,d.default.createElement("div",{className:"intercom-borderless-dismiss-button",onClick:t.handleDismissClick,"aria-label":(0,u.translate)("dismiss"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleDismissClick(e)},role:"button",tabIndex:"0"},d.default.createElement("span",null))))},o.renderViewMoreButton=function(){var t=this;return d.default.createElement("div",{className:"intercom-borderless-view-more-button",onClick:t.handleViewMoreClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleViewMoreClick(e)},role:"button",tabIndex:"0"},d.default.createElement("span",null,(0,u.translate)("view_more")))},o.renderParts=function(){var e=this.props,t=e.appName,r=e.userRole,o=e.conversation,n=e.onArticleCardClick,i=e.onReactionSelect,a=e.onRetry,s=e.frameWindow,l=this.state,c=l.isEmojiPickerOpen,u=l.isGifPickerOpen;return d.default.createElement(p.default,{isBorderless:!0,isFaded:c||u,maxHeight:0,appName:t,userRole:r,conversation:o,frameWindow:s,onArticleCardClick:n,onHeightChange:this.handlePartsHeightChange,onReactionSelect:i,onRetry:a})},o.renderQuickReplies=function(){return d.default.createElement(i.default,{conversation:this.props.conversation,onShow:this.handleQuickRepliesShow,onHide:this.handleQuickRepliesHide,isBorderless:!0})},o.renderFooter=function(){var e=this.state,t=e.isEmojiPickerOpen,r=e.isGifPickerOpen,o=this.props,n=o.showReplyToButton,i=o.onComposerClick,a=o.conversation,s=o.frameWindow;return n&&(0,f.isVisible)(this.props.conversation)?d.default.createElement(h.default,{onShow:this.handleReplyToButtonShow,onClick:i}):d.default.createElement(l.default,{conversation:a,showEmojiPicker:t,showGifPicker:r,onShow:this.handleComposerShow,onHide:this.handleComposerHide,onEmojiPickerToggle:this.handleEmojiPickerToggle,onGifPickerToggle:this.handleGifPickerToggle,frameWindow:s})},o.render=function(){var t=this,e=this.props,r=e.conversation,o=e.frameNode,n=this.state.composerHeight;return d.default.createElement("div",{className:this.getClassName(),style:this.getStyle(),onClick:this.handleClick,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,tabIndex:"-1",role:"region",ref:function(e){return t.borderlessNode=e}},this.shouldRenderHeader()?this.renderHeader():null,d.default.createElement("div",{className:"intercom-borderless-body"},d.default.createElement(a.default,{conversation:r,composerHeight:n,borderlessNode:this.borderlessNode,frameNode:o},function(){return d.default.createElement("div",{className:"intercom-borderless-conversation-body-inner"},t.renderParts(),t.renderQuickReplies())}),this.renderFooter()),d.default.createElement(s.default,{appWindow:this.props.frameWindow}))},r}(d.Component);(t.default=O).propTypes={conversation:o.default.shape({id:o.default.string.isRequired,fetchState:o.default.oneOf(["summary","partial","all"]),parts:o.default.arrayOf(o.default.shape({id:o.default.string,replyType:o.default.oneOf(["text","attribute_collector"])})).isRequired,composerState:o.default.shape({visible:o.default.bool.isRequired}).isRequired}),appName:o.default.string.isRequired,userRole:o.default.string.isRequired,hasHistory:o.default.bool,alignment:o.default.string,onOpen:o.default.func.isRequired,onHeightChange:o.default.func.isRequired,onPopoverToggle:o.default.func.isRequired,onArticleCardClick:o.default.func.isRequired,onReactionSelect:o.default.func.isRequired,onRetry:o.default.func.isRequired,onViewMore:o.default.func.isRequired,onClose:o.default.func.isRequired,onComposerClick:o.default.func.isRequired,frameWindow:o.default.any.isRequired,showReplyToButton:o.default.bool,part:o.default.object,frameNode:o.default.object.isRequired},O.contextTypes={addMetric:o.default.func};var C=(0,n.default)(O);t.IndexedBorderlessConversation=C},1123:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),a=(o=r(14))&&o.__esModule?o:{default:o},s=r(43);function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return c(l(e=n.call.apply(n,[this].concat(r))||this),"button",void 0),c(l(e),"state",{buttonIsAnimating:!1}),c(l(e),"finishButtonAnimation",function(){e.button&&e.setState({buttonIsAnimating:!1})}),e}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){this.button&&this.button.addEventListener("animationend",this.finishButtonAnimation)},o.componentDidUpdate=function(){var e=this.props.resetOverlayClick;this.props.hasClickedOverlay&&(this.setState({buttonIsAnimating:!0}),e())},o.getButtonClassNames=function(){return(0,a.default)({"intercom-tour-step-button":!0,animating:this.state.buttonIsAnimating})},o.render=function(){var t=this,e="click"!==this.props.progressionBehavior;return i.default.createElement("div",{className:e?"intercom-tour-step-footer":"intercom-tour-step-footer intercom-tour-step-footer-no-button-padding"},i.default.createElement("div",{className:"intercom-tour-step-progress"},(0,s.translate)("product_tours_tour_step_number",{start_number:this.props.activeStepIndex+1,end_number:this.props.stepCount})),e&&i.default.createElement("div",{className:this.getButtonClassNames(),ref:function(e){return t.button=e}},i.default.createElement("button",{onClick:this.props.onContinue,tabIndex:"0"},this.props.activeStepIndex+1===this.props.stepCount?(0,s.translate)("product_tours_done"):(0,s.translate)("product_tours_next"))))},r}(i.Component);t.default=n},1141:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),a=r(176),s=n(r(1096));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t,r;function o(){return e.apply(this,arguments)||this}r=e,(t=o).prototype=Object.create(r.prototype),(t.prototype.constructor=t).__proto__=r;var n=o.prototype;return n.componentDidMount=function(){var e=this.props,t=e.isFetching,r=e.isFetched,o=e.onFetch;t||r||o()},n.render=function(){var e=this.props;return i.default.createElement(a.TransitionGroup,null,e.isFetched?i.default.createElement(a.CSSTransition,{classNames:"intercom-message",timeout:{enter:200,exit:200}},i.default.createElement(s.default,e)):null)},o}(i.Component);(t.default=l).propTypes={isFetching:o.default.bool.isRequired,isFetched:o.default.bool.isRequired,onFetch:o.default.func.isRequired}},1142:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.appName,r=e.part,o=e.onClose,n=e.onComposerOrFormInputClick,i=e.composerState,a=(0,u.useState)(0),s=a[0],l=a[1],c=function(e){var t=e.height;return l(t)};return u.default.createElement(f.ChatStyledFrame,{frameName:"intercom-chat-frame",height:s},function(e){return u.default.createElement(u.default.Fragment,null,u.default.createElement(p.default,{onChange:c},u.default.createElement(d.default,{appName:t,part:r,onClose:o,composerState:i,onComposerOrFormInputClick:n,frameWindow:e})),u.default.createElement(h.default,{appWindow:e}))})};var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),d=o(r(1143)),p=o(r(725)),f=r(1184),h=o(r(794));function o(e){return e&&e.__esModule?e:{default:e}}},1143:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),i=o(r(1098)),a=o(r(1083)),l=r(43),c=o(r(420)),u=o(r(1066)),d=o(r(1068)),p=r(1183);function o(e){return e&&e.__esModule?e:{default:e}}var f=r(23).isMobileBrowser,s=function(s){var e,t;function r(){for(var t,e,r,o,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return t=s.call.apply(s,[this].concat(i))||this,e=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),o=function(e){e.stopPropagation(),t.props.onClose()},(r="handleDismissClick")in e?Object.defineProperty(e,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[r]=o,t}t=s,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.renderComposer=function(){var e=this.props.part.author.firstName;return n.default.createElement("div",{className:"intercom-chat-composer"},n.default.createElement("span",{className:"intercom-composer-placeholder"},(0,l.translate)("reply_to_name",{name:e})),n.default.createElement("div",{className:"intercom-composer-buttons"},n.default.createElement("span",{className:"intercom-composer-emoji-button"},n.default.createElement(d.default,null)),n.default.createElement("span",{className:"intercom-composer-upload-button"},n.default.createElement(u.default,null))))},o.renderAttributeCollectorCard=function(){return n.default.createElement(a.default,{part:this.props.part,hasAvatar:!1,isBorderless:f(),isMobile:f(),isReplyType:!0,frameWindow:this.props.frameWindow,key:(0,c.default)(JSON.stringify(this.props.part))})},o.renderDismissButton=function(){return n.default.createElement(p.DismissButton,{onClick:this.handleDismissClick},n.default.createElement("span",null,(0,l.translate)("clear")))},o.renderReplyType=function(){switch(this.props.part.replyType){case"attribute_collector":return this.renderAttributeCollectorCard();default:return this.renderComposer()}},o.renderChatCardGroup=function(){return n.default.createElement(i.default,{appName:this.props.appName,part:this.props.part,isBorderless:f(),isMobile:f(),frameWindow:this.props.frameWindow})},o.render=function(){var e=this.props,t=e.composerState,r=e.onComposerOrFormInputClick;return n.default.createElement(p.ChatStyled,{className:"intercom-chat",onClick:r},this.renderChatCardGroup(),this.renderDismissButton(),t.visible&&this.renderReplyType())},r}(n.Component);t.default=s},1183:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DismissButton=t.ChatStyled=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),n=r(418),i=s(r(99)),a=s(r(78));function s(e){return e&&e.__esModule?e:{default:e}}var l={name:"zrr1m9",styles:"right:auto;"},c={name:"1w21syu",styles:"width:calc(100% - 75px);"},u=o.default.div("z-index:",(0,n.zIndex)(),";position:fixed;bottom:",(0,o.theme)("verticalPadding"),"px;right:",(0,o.theme)("horizontalPadding"),"px;width:260px;max-width:260px;font-family:",(0,o.theme)("fontSansSerif"),";",function(e){var t=e.theme;return t.isLeftAlign&&(0,o.css)("left:",t.horizontalPadding+t.borderlessAvatarOffsetWidth,"px;.intercom-chat-composer{margin-left:",-t.borderlessAvatarOffsetWidth,"px;width:calc(100% + ",t.borderlessAvatarOffsetWidth,"px);}")}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&(0,o.css)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding,"px;")}," ",function(e){return e.theme.isMobileSize&&c}," ",function(e){var t=e.theme;return t.isMobileSize&&t.isLeftAlign&&l});t.ChatStyled=u;var d=o.default.div("position:absolute;top:3px;right:3px;width:12px;height:12px;padding:10px;background-position:center;",(0,n.backgroundImage2x)(i.default,a.default,"12px","12px"),";span{display:none;}");t.DismissButton=d},1184:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatStyledFrame=void 0;var o,n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),i=(o=r(451))&&o.__esModule?o:{default:o},a=r(418);var s={name:"145vpms",styles:"left:0;right:auto;"},l=(0,n.default)(i.default)("z-index:",(0,a.zIndex)(),";position:fixed;max-width:360px;width:calc(100% - 25px);right:0;",function(e){var t=e.height;return(0,n.css)("bottom:0;height:",t+20,"px;")}," ",function(e){return e.theme.isLeftAlign&&s}," ",function(e){var t=e.theme,r=e.height;return t.isLauncherEnabled&&(0,n.css)("height:",r+t.launcherOffsetBottomPadding+20,"px;")});t.ChatStyledFrame=l},1185:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),h=o(r(1186)),m=o(r(725)),v=o(r(794)),y=r(1188);function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var r,e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return a(i(r=n.call.apply(n,[this].concat(t))||this),"state",{height:0}),a(i(r),"handleHeightChange",function(e){var t=e.height;r.setState({height:t})}),r}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){var t=this,e=this.props,r=e.conversationId,o=e.appName,n=e.message,i=e.reactionsReply,a=e.showUploadButton,s=e.showGifButton,l=e.onComposerClick,c=e.onReactionSelect,u=e.showReplyToButton,d=e.onClose,p=this.state.height;return f.default.createElement(y.NoteStyledFrame,{style:{height:p},frameName:"intercom-note-frame"},function(e){return f.default.createElement("span",null,f.default.createElement(m.default,{id:"note-frame",key:"note-frame",onChange:t.handleHeightChange},f.default.createElement(h.default,{frameWindow:e,conversationId:r,appName:o,message:n,reactionsReply:i,showUploadButton:a,showGifButton:s,onClose:d,onComposerClick:l,onReactionSelect:c,showReplyToButton:u})),f.default.createElement(v.default,{appWindow:e}))})},r}(f.Component);t.default=n},1186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(14)),d=n(r(1067)),p=n(r(1059)),f=n(r(1063)),a=n(r(1071)),s=r(48),h=r(43),l=n(r(1066)),c=n(r(1068)),m=n(r(1107)),v=n(r(1085));function n(e){return e&&e.__esModule?e:{default:e}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return b(g(o=n.call.apply(n,[this].concat(t))||this),"state",{isFooterVisible:!0,isScrolled:!1}),b(g(o),"handleScroll",function(e){var t=o.state.isFooterVisible,r=(0,s.getScrollBottom)(e.target);o.setState({isFooterVisible:t||r<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),b(g(o),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,r=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:r})}),b(g(o),"getBodyClassName",function(){return(0,i.default)({"intercom-note-body":!0,"intercom-note-reply-to-body":o.props.showReplyToButton})}),b(g(o),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,r=e.conversationId;o.context.addMetric("clicked","composer","in_app","from_full",{message_type:"note",message_id:t,conversation_id:r})}),b(g(o),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.getClassNames=function(){return(0,i.default)({"intercom-note":!0,"intercom-note-scrolled":this.state.isScrolled})},o.getFooterClassNames=function(){return(0,i.default)({"intercom-note-footer":!0,"intercom-note-footer-visible":this.state.isFooterVisible,"intercom-note-footer-text-center":this.props.showReplyToButton})},o.renderFooter=function(){var t=this,e=this.props,r=e.showUploadButton,o=e.showGifButton;return e.showReplyToButton?u.default.createElement(v.default,{onClick:this.handleComposerClick}):u.default.createElement("div",{className:"intercom-note-composer",onClick:t.handleComposerClick,"aria-label":(0,h.translate)("open_conversation_and_reply"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},u.default.createElement("span",{className:"intercom-composer-placeholder"},(0,h.translate)("reply_to_conversation")),u.default.createElement("div",{className:"intercom-composer-buttons"},o?u.default.createElement("span",{className:"intercom-composer-gif-button"},u.default.createElement(m.default,null)):null,u.default.createElement("span",{className:"intercom-composer-emoji-button"},u.default.createElement(c.default,null)),r?u.default.createElement("span",{className:"intercom-composer-upload-button"},u.default.createElement(l.default,null)):null))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,r=e.onReactionSelect;return u.default.createElement(a.default,y({},t,{onReactionSelect:r}))},o.render=function(){var t=this,e=this.props,r=e.appName,o=e.message,n=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=o.author,l=o.lastActiveAt,c=o.body;return u.default.createElement("div",{className:this.getClassNames()},u.default.createElement(f.default,{appName:r,isReplyStyle:!1,author:s,lastActiveAt:l},u.default.createElement("span",{className:"intercom-note-close intercom-anchor",onClick:i,"aria-label":(0,h.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"},"Â "),u.default.createElement("div",{className:this.getBodyClassName()},u.default.createElement(d.default,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},u.default.createElement(p.default,{blocks:c,zoomable:!0,frameWindow:a}))),u.default.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},n?this.renderReactionPicker():this.renderFooter())))},r}(u.Component);(t.default=O).propTypes={appName:o.default.string.isRequired,message:o.default.shape({author:o.default.object.isRequired,body:o.default.array.isRequired,lastActiveAt:o.default.instanceOf(Date)}).isRequired,conversationId:o.default.string,reactionsReply:o.default.shape({reactionIndex:o.default.number,reactionSet:o.default.array.isRequired}),onClose:o.default.func,onComposerClick:o.default.func,onReactionSelect:o.default.func,frameWindow:o.default.object,showUploadButton:o.default.bool,showGifButton:o.default.bool,showReplyToButton:o.default.bool},O.defaultProps={showUploadButton:!0,showGifButton:!0},O.contextTypes={addMetric:o.default.func.isRequired}},1188:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoteStyledFrame=void 0;var o,n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),i=(o=r(451))&&o.__esModule?o:{default:o},a=r(418);var s={name:"fnfiys",styles:"right:0;left:0;margin:0 auto;"},l=(0,n.default)(i.default)("position:fixed;bottom:",(0,a.getBottomPadding)(),"px;right:",(0,n.theme)("horizontalPadding"),"px;width:342px;z-index:",(0,a.zIndex)(1),";box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);",function(e){var t=e.theme;return t.isLeftAlignment&&(0,n.css)("left:",t.horizontalPadding,"px;right:auto;")}," ",function(e){return e.theme.isMobileSize&&s});t.NoteStyledFrame=l},1189:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),d=o(r(1190)),p=o(r(725)),f=o(r(1109)),h=r(1199);function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return a(i(o=n.call.apply(n,[this].concat(t))||this),"state",{width:0,height:0}),a(i(o),"handleDimensionFrameSize",function(e){var t=e.height,r=e.width;o.setState({width:r,height:t})}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.frameStyles=function(){var e=this.state;return{width:e.width,height:e.height}},o.render=function(){var e=this,t=this.props,r=t.appName,o=t.appWindow,n=t.message,i=t.conversationId,a=t.onClose,s=t.reactionsReply,l=t.onComposerClick,c=t.onReactionSelect;return u.default.createElement(f.default,{appWindow:o,targetSelector:n.pointerSelector,childDimensions:this.frameStyles()},u.default.createElement(h.PointerStyledFrame,{style:this.frameStyles(),frameName:"intercom-pointer-frame"},function(){return u.default.createElement(p.default,{id:"pointer-frame",key:"pointer-frame",onChange:e.handleDimensionFrameSize},u.default.createElement(d.default,{appName:r,message:n,conversationId:i,reactionsReply:s,frameWindow:o,onComposerClick:l,onReactionSelect:c,onClose:a}))}))},r}(u.PureComponent);t.default=n},1190:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),i=n(r(14)),d=n(r(1067)),p=n(r(1059)),f=n(r(1063)),a=n(r(1071)),s=r(48),h=r(43),l=n(r(1191));function n(e){return e&&e.__esModule?e:{default:e}}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v(m(o=n.call.apply(n,[this].concat(t))||this),"node",void 0),v(m(o),"state",{isFooterVisible:!0,isScrolled:!1}),v(m(o),"footer",void 0),v(m(o),"handleScroll",function(e){var t=o.state.isFooterVisible,r=(0,s.getScrollBottom)(e.target);o.setState({isFooterVisible:t||r<=o.getFooterHeight(),isScrolled:0<e.target.scrollTop})}),v(m(o),"handleScrollable",function(e){var t=e.scrollHeight-e.clientHeight,r=o.state.isFooterVisible||void 0===o.props.reactionsReply||t<=o.getReactionsVisibilityThreshold();o.setState({isFooterVisible:r})}),v(m(o),"getBodyClassName",function(){return(0,i.default)({"intercom-pointer-body":!0,"intercom-replies-disabled":o.isReplyDisabled()})}),v(m(o),"isReplyDisabled",function(){return"disabled"===o.props.message.replyType}),v(m(o),"addClickedComposerMetric",function(){var e=o.props,t=e.message.id,r=e.conversationId;o.context.addMetric("clicked","composer","in_app","from_full",{message_type:"pointer",message_id:t,conversation_id:r})}),v(m(o),"handleComposerClick",function(){o.addClickedComposerMetric(),o.props.onComposerClick()}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getReactionsVisibilityThreshold=function(){return this.getFooterHeight()+20},o.getFooterHeight=function(){return this.footer?this.footer.clientHeight:0},o.getClassNames=function(){return(0,i.default)({"intercom-pointer":!0,"intercom-pointer-scrolled":this.state.isScrolled})},o.getFooterClassNames=function(){return(0,i.default)({"intercom-pointer-footer":!0,"intercom-pointer-footer-visible":this.state.isFooterVisible})},o.renderFooter=function(e){var t=this;return this.isReplyDisabled()?null:u.default.createElement("div",{ref:function(e){return t.footer=e},className:this.getFooterClassNames()},e?this.renderReactionPicker():this.renderChatComposer())},o.renderChatComposer=function(){var t=this;return u.default.createElement("div",{className:"intercom-pointer-composer",onClick:t.handleComposerClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleComposerClick(e)},role:"button",tabIndex:"0"},u.default.createElement("span",null,u.default.createElement(l.default,null)),u.default.createElement("span",{className:"intercom-composer-placeholder"},(0,h.translate)("start_a_conversation")))},o.renderReactionPicker=function(){var e=this.props,t=e.reactionsReply,r=e.onReactionSelect;return u.default.createElement(a.default,c({},t,{onReactionSelect:r}))},o.render=function(){var t=this,e=this.props,r=e.appName,o=e.message,n=e.reactionsReply,i=e.onClose,a=e.frameWindow,s=o.author,l=o.lastActiveAt,c=o.body;return u.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames()},u.default.createElement(f.default,{appName:r,isReplyStyle:!1,author:s,lastActiveAt:l},u.default.createElement("span",{className:"intercom-pointer-close",onClick:i,"aria-label":(0,h.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&i(e)},role:"button",tabIndex:"0"},"Â "),u.default.createElement("div",{className:this.getBodyClassName()},u.default.createElement(d.default,{onScroll:this.handleScroll,onScrollable:this.handleScrollable},u.default.createElement(p.default,{blocks:c,zoomable:!0,frameWindow:a}))),this.renderFooter(n)))},r}(u.Component);(t.default=y).contextTypes={addMetric:o.default.func.isRequired}},1191:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return n.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",className:"intercom-chat-bubble-icon"},n.default.createElement("path",{d:"M7.357 1.071c.34-.035.679-.071.982-.071 3 0 6.304 2.054 6.625 5.59.018.214.036.428.036.642 0 3.054-2.518 6.179-6.357 6.697A6.958 6.958 0 0 1 7.75 14c-.357 0-.357 0-.75-.071-.91 1.178-1.982 1.482-3.16 1.696a3.184 3.184 0 0 1-.536.054c-.304 0-.733-.143-.536-.34.928-.785 1.036-1.303 1.036-2.214 0-.09 0-.179-.018-.268-1.625-1.107-2.536-2.571-2.75-4.446A7.753 7.753 0 0 1 1 7.768C1 4.714 3.518 1.589 7.357 1.07z"}))};var o,n=(o=r(1))&&o.__esModule?o:{default:o}},1193:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,n=r(1),i=(o=r(76))&&o.__esModule?o:{default:o};function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(n){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return s(a(e=n.call.apply(n,[this].concat(r))||this),"document",e.props.appWindow.document),s(a(e),"state",{container:null}),e}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){var e=this.props.appWindow,t=e.document.querySelector("#intercom-container");if(e.document.body){var r=e.document.createElement("div");r.id="intercom-positioner-tree",r.classList.add("intercom-namespace"),r.style.cssText="position: initial; !important; z-index: 2147483647 !important;",t.insertAdjacentElement("beforeBegin",r),this.setState({container:r})}},o.componentWillUnmount=function(){var e=this.props.appWindow.document.body,t=this.state.container;e&&t&&e.removeChild(t)},o.render=function(){return this.state.container?i.default.createPortal(this.props.children,this.state.container):null},r}(n.Component);t.default=l},1194:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveIntersectionWindowContext=t.default=void 0;t.default=function(m){if(!m.IntercomIntersectionObserver){var v=m.document;if("IntersectionObserver"in m&&"IntersectionObserverEntry"in m&&"intersectionRatio"in m.IntersectionObserverEntry.prototype&&"isIntersecting"in m.IntersectionObserverEntry.prototype)return m.IntercomIntersectionObserver=m.IntersectionObserver,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry,!0;var t=[];e.prototype.THROTTLE_TIMEOUT=100,e.prototype.POLL_INTERVAL=null,e.prototype.USE_MUTATION_OBSERVER=!0,e.prototype.observe=function(t){if(!this._observationTargets.some(function(e){return e.element==t})){if(!t||1!=t.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:t,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},e.prototype.unobserve=function(t){this._observationTargets=this._observationTargets.filter(function(e){return e.element!=t}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},e.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},e.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},e.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter(function(e,t,r){if("number"!=typeof e||isNaN(e)||e<0||1<e)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==r[t-1]})},e.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map(function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}});return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},e.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(r(m,"resize",this._checkForIntersections,!0),r(v,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in m&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(v,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},e.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,o(m,"resize",this._checkForIntersections,!0),o(v,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},e.prototype._checkForIntersections=function(){var s=this._rootIsInDom(),l=s?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach(function(e){var t=e.element,r=y(t),o=this._rootContainsTarget(t),n=e.entry,i=s&&o&&this._computeTargetAndRootIntersection(t,l),a=e.entry=new c({time:m.performance&&performance.now&&performance.now(),target:t,boundingClientRect:r,rootBounds:l,intersectionRect:i});n?s&&o?this._hasCrossedThreshold(n,a)&&this._queuedEntries.push(a):n&&n.isIntersecting&&this._queuedEntries.push(a):this._queuedEntries.push(a)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},e.prototype._computeTargetAndRootIntersection=function(e,t){if("none"!=m.getComputedStyle(e).display){for(var r,o,n,i,a,s,l,c,u=y(e),d=g(e),p=!1;!p;){var f=null,h=1==d.nodeType?m.getComputedStyle(d):{};if("none"==h.display)return;if(d==this.root||d==v?(p=!0,f=t):d!=v.body&&d!=v.documentElement&&"visible"!=h.overflow&&(f=y(d)),f&&(r=f,o=u,n=Math.max(r.top,o.top),i=Math.min(r.bottom,o.bottom),a=Math.max(r.left,o.left),s=Math.min(r.right,o.right),c=i-n,!(u=0<=(l=s-a)&&0<=c&&{top:n,bottom:i,left:a,right:s,width:l,height:c})))break;d=g(d)}return u}},e.prototype._getRootRect=function(){var e;if(this.root)e=y(this.root);else{var t=v.documentElement,r=v.body;e={top:0,left:0,right:t.clientWidth||r.clientWidth,width:t.clientWidth||r.clientWidth,bottom:t.clientHeight||r.clientHeight,height:t.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(e)},e.prototype._expandRectByRootMargin=function(r){var e=this._rootMarginValues.map(function(e,t){return"px"==e.unit?e.value:e.value*(t%2?r.width:r.height)/100}),t={top:r.top-e[0],right:r.right+e[1],bottom:r.bottom+e[2],left:r.left-e[3]};return t.width=t.right-t.left,t.height=t.bottom-t.top,t},e.prototype._hasCrossedThreshold=function(e,t){var r=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(r!==o)for(var n=0;n<this.thresholds.length;n++){var i=this.thresholds[n];if(i==r||i==o||i<r!=i<o)return!0}},e.prototype._rootIsInDom=function(){return!this.root||n(v,this.root)},e.prototype._rootContainsTarget=function(e){return n(this.root||v,e)},e.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},e.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},m.IntercomIntersectionObserver=e,m.IntercomIntersectionObserverEntry=m.IntersectionObserverEntry}function c(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,r=t.width*t.height,o=this.intersectionRect,n=o.width*o.height;this.intersectionRatio=r?n/r:this.isIntersecting?1:0}function e(e,t){var r,o,n,i=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(i.root&&1!=i.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(r=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,n=null,function(){n||(n=setTimeout(function(){r(),n=null},o))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(i.rootMargin),this.thresholds=this._initThresholds(i.threshold),this.root=i.root||null,this.rootMargin=this._rootMarginValues.map(function(e){return e.value+e.unit}).join(" ")}function r(e,t,r,o){"function"==typeof e.addEventListener?e.addEventListener(t,r,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,r)}function o(e,t,r,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,r,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,r)}function y(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function n(e,t){for(var r=t;r;){if(r==e)return!0;r=g(r)}return!1}function g(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}};t.RemoveIntersectionWindowContext=function(e){e.IntercomIntersectionObserver&&(delete e.IntercomIntersectionObserver,delete e.IntercomIntersectionObserverEntry)}},1195:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeScrollIntoViewPolyfill=t.default=void 0;t.default=function(e){var l=e,c=e.document,t=l.HTMLElement||l.Element,a=800,u={scroll:l.scroll||l.scrollTo,scrollBy:l.scrollBy||l.intercomScrollBy,elementScroll:p,intercomScrollIntoView:t.prototype.intercomScrollIntoView},d=l.performance&&l.performance.now?l.performance.now.bind(l.performance):Date.now;var r,o=(r=l.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);function p(e,t){this.scrollLeft=e,this.scrollTop=t}function n(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function i(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function s(e,t){var r=l.getComputedStyle(e,null)["overflow"+t];return"auto"===r||"scroll"===r}function f(e){var t,r,o,n,i=(d()-e.startTime)/a;n=i=1<i?1:i,t=.5*(1-Math.cos(Math.PI*n)),r=e.startX+(e.x-e.startX)*t,o=e.startY+(e.y-e.startY)*t,e.method.call(e.scrollable,r,o),r===e.x&&o===e.y||l.requestAnimationFrame(f.bind(l,e))}function h(e,t,r){var o,n,i,a,s=d();a=e===c.body?(n=(o=l).scrollX||l.pageXOffset,i=l.scrollY||l.pageYOffset,u.scroll):(n=(o=e).scrollLeft,i=e.scrollTop,p),f({scrollable:o,method:a,startTime:s,startX:n,startY:i,x:t,y:r})}l.intercomScrollBy=function(){void 0!==arguments[0]&&(n(arguments[0])?u.scrollBy.call(l,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):h.call(l,c.body,~~arguments[0].left+(l.scrollX||l.pageXOffset),~~arguments[0].top+(l.scrollY||l.pageYOffset)))},t.prototype.intercomScrollIntoView=function(){if(!0!==n(arguments[0])){var e=function(e){for(var t,r,o;0==((e=e.parentNode)===c.body)&&!1===(r=i(t=e,"Y")&&s(t,"Y"),o=i(t,"X")&&s(t,"X"),r||o););return e}(this),t=e.getBoundingClientRect(),r=this.getBoundingClientRect();e!==c.body?(h.call(this,e,e.scrollLeft+r.left-t.left,e.scrollTop+r.top-t.top),"fixed"!==l.getComputedStyle(e).position&&l.intercomScrollBy({left:t.left,top:t.top,behavior:"smooth"})):l.intercomScrollBy({left:r.left,top:r.top,behavior:"smooth"})}else u.intercomScrollIntoView.call(this,void 0===arguments[0]||arguments[0])}};t.removeScrollIntoViewPolyfill=function(e){var t=e;(t.HTMLElement||t.Element).prototype.intercomScrollIntoView=null,t.intercomScrollBy&&delete t.intercomScrollBy}},1196:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrowFnModifier=void 0;var O=r(1197);t.arrowFnModifier=function(e,t){var r,o=t.element,n=e.placement.split("-")[0],i=e.offsets,a=i.popper,s=i.reference,l=-1!==["left","right"].indexOf(n),c=l?"height":"width",u=l?"Top":"Left",d=u.toLowerCase(),p=l?"left":"top",f=l?"bottom":"right",h=(0,O.getOuterSizes)(o)[c];s[f]-h<a[d]&&(e.offsets.popper[d]-=a[d]-(s[f]-h)),s[d]+h>a[f]&&(e.offsets.popper[d]+=s[d]+h-a[f]),e.offsets.popper=(0,O.getClientRect)(e.offsets.popper);var m=s[d]+s[c]/2-h/2,v=(0,O.getStyleComputedProperty)(e.instance.popper),y=parseFloat(v["margin"+u]),g=parseFloat(v["border"+u+"Width"]),b=m-e.offsets.popper[d]-y-g;return b=Math.max(Math.min(a[c]-h-18,b),0),e.arrowElement=o,e.offsets.arrow=((r={})[d]=Math.round(b),r[p]="",r),e}},1198:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OverlayStyled=t.ArrowFrameStyled=t.ArrowWrapperStyled=t.PositionerMaskStyled=t.PositionerStyled=void 0;var o,n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),i=(o=r(451))&&o.__esModule?o:{default:o},a=r(418);var s=(0,n.keyframes)("0%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);}"),l=(0,n.keyframes)("0%{opacity:0;transform:translateY(-20px);}100%{opacity:1;transform:translateY(0);}"),c=(0,n.keyframes)("0%{opacity:0;transform:translateX(-20px);}100%{opacity:1;transform:translateY(0);}"),u=(0,n.keyframes)("0%{opacity:0;transform:translateX(20px);}100%{opacity:1;transform:translateY(0);}"),d=n.default.div("transition:opacity 300ms ease-out;z-index:",(0,a.zIndex)(1),";&[x-placement]{padding:15px;}&[x-placement^='top']{.intercom-positioner-arrow-wrapper{bottom:-13.5px;}.intercom-positioner-animation-wrapper{animation:",l," 300ms ease;}}&[x-placement^='right']{.intercom-positioner-arrow-wrapper{left:-5.5px;}.intercom-positioner-animation-wrapper{animation:",u," 300ms ease;}}&[x-placement^='bottom']{.intercom-positioner-arrow-wrapper{top:-5.5px;}.intercom-positioner-animation-wrapper{animation:",s," 300ms ease;}}&[x-placement^='left']{.intercom-positioner-arrow-wrapper{right:-14px;}.intercom-positioner-animation-wrapper{animation:",c," 300ms ease;}}");t.PositionerStyled=d;var p={name:"41q668",styles:"transform:scale(1);"},f=function(e,t){return(0,n.keyframes)("0%{",p,"}85%{",(r=e,o=t,(0,n.css)("transform:scaleX(calc(1 + (4 / ",r,"))) scaleY(calc(1 + (4 / ",o,")));")),"}100%{",p,"}");var r,o},h={name:"1qu4hyo",styles:"display:block;position:fixed;top:50%;left:50%;box-shadow:0px 0px 0px 4000px rgba(0,0,0,0.35);"},m=n.default.div("z-index:",(0,a.zIndex)(),";content:'';display:none;position:absolute;left:0;top:0;width:0;height:0;pointer-events:none;border-radius:1px;",function(e){var t=e.isAnimating,r=e.width,o=e.height;return t&&(0,n.css)("animation:",f(r,o)," 2s infinite;")}," ",function(e){return e.isPost&&h}," ",function(e){var t=e.isStep,r=e.theme;return t&&(0,n.css)("display:block;box-shadow:0 0 0 3px ",r.appColor,",0px 0px 0px 4000px rgba(0,0,0,0.35);")});t.PositionerMaskStyled=m;var v=n.default.div({name:"1isip6o",styles:"position:absolute;pointer-events:none;"});t.ArrowWrapperStyled=v;var y=(0,n.default)(i.default)({name:"1cs7hh",styles:"height:38px;width:38px;pointer-events:none;"});t.ArrowFrameStyled=y;var g=n.default.div(function(e){var t=e.scrollable,r=e.theme;return t&&(0,n.css)("position:fixed;height:100%;width:100%;top:0;left:0;opacity:0;box-sizing:border-box;z-index:",(0,a.zIndex)(0,r),";")});t.OverlayStyled=g},1199:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PointerStyledFrame=void 0;var o=a(r(17)),n=a(r(451)),i=r(418);function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,o.default)(n.default)("z-index:",(0,i.zIndex)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);");t.PointerStyledFrame=s},1200:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.conversation,r=e.standalone,o=e.part,n=e.onClose,i=e.onComposerOrFormInputClick;return a.default.createElement(l.StoryStyledFrame,{frameName:"intercom-story-frame"},function(e){return a.default.createElement(a.default.Fragment,null,a.default.createElement(s.default,{conversation:t,standalone:r,part:o,onClose:n,onComposerOrFormInputClick:i}),a.default.createElement(c.default,{appWindow:e}))})};var a=o(r(1)),s=o(r(1201)),l=r(1208),c=o(r(794));function o(e){return e&&e.__esModule?e:{default:e}}},1201:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),d=r(176),p=o(r(1101)),i=o(r(1086)),a=r(43),f=r(1206),s=r(1207),l=o(r(1066)),c=o(r(1068));function o(e){return e&&e.__esModule?e:{default:e}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return m(h(e=n.call.apply(n,[this].concat(r))||this),"video",void 0),m(h(e),"state",{isExpanded:!1,isVideoLoaded:!1}),m(h(e),"handleOverlayClick",function(){e.state.isVideoLoaded&&e.setState({isExpanded:!0})}),m(h(e),"handleVideoLoaded",function(){e.setState({isVideoLoaded:!0})}),e}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.renderDismissButton=function(){return this.props.standalone?u.default.createElement(f.StoryDismissButton,{className:"story-dismiss-button",onClick:this.props.onClose},u.default.createElement("span",null)):null},o.renderOverlay=function(){return this.state.isExpanded?null:u.default.createElement(f.StoryOverlay,{className:"story-overlay",onClick:this.handleOverlayClick})},o.renderComposer=function(){var e=this.props,t=e.part,r=e.onComposerOrFormInputClick,o=t.author.firstName;return u.default.createElement(d.CSSTransition,{classNames:"video-composer",timeout:{enter:400,exit:400}},u.default.createElement(f.StoryVideoComposerTransition,null,u.default.createElement(s.ChatComposer,{className:"chat-composer",onClick:r,"aria-label":(0,a.translate)("open_conversation_and_reply")},u.default.createElement(s.ChatComposerPlaceholder,{className:"composer-placeholder"},(0,a.translate)("reply_to_name",{name:o})),u.default.createElement(s.ChatComposerButtonGroup,{className:"composer-buttons"},u.default.createElement(s.ChatComposerButton,null,u.default.createElement(c.default,null)),u.default.createElement(s.ChatComposerButton,null,u.default.createElement(l.default,null))))))},o.renderQuickReplies=function(){var e=this.props.conversation;return e?u.default.createElement(i.default,{conversation:e,isBorderless:!0}):null},o.renderResponseArea=function(){return this.state.isExpanded&&this.props.showResponseArea?(e=this.props.part)&&e.replyOptions&&0<e.replyOptions.length?this.renderQuickReplies():this.renderComposer():null;var e},o.render=function(){var e=this.props,t=e.part.body,r=e.autoPlay,o=e.standalone,n=this.state,i=n.isExpanded,a=n.isVideoLoaded,s=t[0],l=s.url,c=s.captions;return u.default.createElement(f.StoryStyled,{standalone:o,isVideoLoaded:a},this.renderDismissButton(),u.default.createElement(f.StoryStyledContainer,{standalone:o,isExpanded:i},this.renderOverlay(),u.default.createElement(p.default,{srcUrl:l,autoPlay:r,onVideoLoaded:this.handleVideoLoaded,captions:c})),u.default.createElement(d.TransitionGroup,null,this.renderResponseArea()))},r}(u.Component);m(t.default=n,"defaultProps",{standalone:!1,onClose:function(){},showResponseArea:!0,autoPlay:!1})},1206:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoryVideoComposerTransition=t.StoryOverlay=t.StoryDismissButton=t.StoryStyledContainer=t.StoryStyled=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),n=r(418),i=s(r(194)),a=s(r(195));function s(e){return e&&e.__esModule?e:{default:e}}var l={name:"siiwv4",styles:"&:hover .story-dismiss-button{opacity:1;}"},c=o.default.div("z-index:",(0,n.zIndex)(1),";font-size:13px;font-family:",(0,o.theme)("fontSansSerif"),";color:",(0,o.theme)("bodyText"),";position:relative;",function(e){var t=e.theme;return e.standalone&&(0,o.css)("position:fixed;bottom:",t.verticalPadding,"px;right:",t.horizontalPadding,"px;")}," ",function(e){return e.isVideoLoaded&&l}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&(0,o.css)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding,"px;")});t.StoryStyled=c;var u={name:"1c9b7w0",styles:"width:240px;height:180px;margin-left:10px;"},d={name:"dxx3wj",styles:"margin-top:42px;"},p={name:"ajzub1",styles:"margin-top:54px;"},f=o.default.div("position:relative;overflow:hidden;box-shadow:0px 2px 16px rgba(0,0,0,0.14),0px 1px 6px rgba(0,0,0,0.06);border-radius:5px;transition:transform 150ms ease,width 200ms ease,height 200ms ease,margin 200ms;transform-origin:bottom right;width:340px;height:255px;",function(e){return e.standalone&&p}," ",function(e){var t=e.standalone,r=e.isExpanded;return t&&r&&d}," ",function(e){return e.theme.isMobileSize&&u});t.StoryStyledContainer=f;var h=o.default.div("position:absolute;top:0;right:0;display:block;opacity:0;transition:opacity 150ms ease;span{display:block;background-color:#5d6c80;opacity:0.8;color:",(0,o.theme)("white"),";font-size:13px;height:32px;line-height:32px;padding:0 16px 0 16px;border-radius:16px;cursor:pointer;background-position:center;",(0,n.backgroundImage2x)(i.default,a.default,"8px","8px"),";&:hover{opacity:1;}}");t.StoryDismissButton=h;var m=o.default.div("position:absolute;width:100%;z-index:",(0,n.zIndex)(1),";top:0;left:0;right:0;bottom:0;cursor:pointer;");t.StoryOverlay=m;var v=o.default.div({name:"maq7xh",styles:".chat-composer{margin-top:10px;}&.video-composer-enter{.chat-composer{display:block;height:0;opacity:0;overflow:hidden;padding-top:0;padding-bottom:0;margin-top:0;}.composer-placeholder,.composer-buttons{opacity:0;transition:opacity 200ms ease;transition-delay:200ms;}}&.video-composer-enter-active{.chat-composer{opacity:1;height:52px;padding-top:17px;padding-bottom:17px;transition-property:height,opacity,padding,margin;transition-duration:200ms;transition-timing-function:ease;margin-top:10px;}.composer-placeholder,.composer-buttons{opacity:1;}}"});t.StoryVideoComposerTransition=v},1207:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatComposerButton=t.ChatComposerButtonGroup=t.ChatComposerPlaceholder=t.ChatComposer=void 0;var o=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17));var n=o.default.div("position:relative;box-sizing:border-box;padding:17px 20px;margin-top:5px;width:100%;height:",(0,o.theme)("chatComposerHeight"),"px;background-color:",(0,o.theme)("inputBackground"),";border-radius:",(0,o.theme)("notificationBorderRadius"),"px;border:none;font-size:14px;cursor:pointer;color:",(0,o.theme)("grey"),";box-shadow:0 1px 6px rgba(0,0,0,0.06),0 2px 32px rgba(0,0,0,0.16);");t.ChatComposer=n;var i=o.default.span({name:"1rju6wc",styles:"display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:140px;line-height:18px;"});t.ChatComposerPlaceholder=i;var a=o.default.div({name:"1cp2t9f",styles:"position:absolute;top:0;right:18px;"});t.ChatComposerButtonGroup=a;var s={name:"pctu5d",styles:"position:relative;float:left;display:inline-block;cursor:pointer;opacity:0.8;transition:opacity 200ms ease;height:51px;margin-top:2px;&:hover{opacity:1;}&:before{position:absolute;top:20px;background-position:center;}svg{position:absolute;top:18px;}"},l=o.default.span(s,";width:",18,"px;padding-left:",9,"px;padding-right:",9,"px;svg{height:18px;width:18px;}svg path{fill:",(0,o.theme)("grey"),";}&:before{top:18px;}");t.ChatComposerButton=l},1208:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoryStyledFrame=void 0;var o=a(r(17)),n=a(r(451)),i=r(418);function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,o.default)(n.default)("z-index:",(0,i.zIndex)()," !important;position:fixed !important;right:0;bottom:0;width:100vw;height:100vh;");t.StoryStyledFrame=s},1209:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),u=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),d=n(r(1210)),p=r(1257);function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return a(i(t=n.call.apply(n,[this].concat(r))||this),"state",{height:0,isPopoverOpen:!1}),a(i(t),"handleHeightChange",function(e){t.setState({height:e})}),a(i(t),"handlePopoverToggle",function(e){t.setState({isPopoverOpen:e})}),t}return t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t,r.prototype.render=function(){var r=this,e=this.props,o=e.conversation,n=e.part,i=e.onClose,a=e.onComposerClick,s=e.showReplyToButton,t=this.state,l=t.isPopoverOpen,c=t.height;return u.default.createElement(p.BorderlessStyledFrame,{style:{height:c},className:"intercom-borderless-frame",frameName:"intercom-borderless-frame",isPopoverOpen:l},function(e,t){return u.default.createElement(d.default,{conversation:o,part:n,frameWindow:e,onClose:i,onHeightChange:r.handleHeightChange,onPopoverToggle:r.handlePopoverToggle,onComposerClick:a,showReplyToButton:s,frameNode:t})})},r}(u.Component);(t.default=s).propTypes={conversation:o.default.object.isRequired,part:o.default.object.isRequired,onClose:o.default.func.isRequired,onComposerClick:o.default.func,showReplyToButton:o.default.bool}},1210:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mergeProps=t.mapDispatchToProps=t.mapStateToProps=void 0;var o=r(42),n=r(1113),u=r(741),i=r(62),a=r(183).openBorderlessConversationInMessenger,s=r(1087).openArticle,l=r(1256).openBorderlessConversation,c=r(182),d=c.createPart,p=c.createReaction,f=function(e,t){var r=e.app.name,o=e.user.role,n=t.part,i=t.conversation,a=(0,u.customizationSelector)(e).alignment,s=i.parts.filter(function(e){return e.createdAt>=n.createdAt}),l=s[0].messageType;l=l||"adminReply",s[0]=Object.assign({},s[0],{messageType:l});var c=s.length<i.parts.length;return{appName:r,userRole:o,conversation:Object.assign({},i,{parts:s}),hasHistory:c,alignment:a}};t.mapStateToProps=f;var h=function(r){return{onOpen:function(e){r(l(e))},onRetry:function(e,t){r(d(i,e,t,!0))},onReactionSelect:function(e,t){r(p(i,e,t,!1))},onArticleCardClick:function(e,t){r(s(i,e,t))},onViewMore:function(e,t){r(a(e,"viewmore_borderless",t))}}};t.mapDispatchToProps=h;var m=function(e,t,r){var o=e.conversation,n=o.id,i=o.lastParticipatingAdmin,a={onOpen:function(){t.onOpen(n)},onReactionSelect:function(e){t.onReactionSelect(n,e)},onRetry:function(e){t.onRetry(n,e)},onViewMore:function(){t.onViewMore(n,i)},conversation:o};return Object.assign({},e,t,r,a)};t.mergeProps=m;var v=(0,o.connect)(f,h,m)(n.IndexedBorderlessConversation);t.default=v},1240:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),a=(o=r(1116))&&o.__esModule?o:{default:o},s=r(59);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return u(c(t=n.call.apply(n,[this].concat(r))||this),"ref",void 0),u(c(t),"setRef",function(e){t.ref=e}),t}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){(0,s.isVisible)(this.props.conversation)&&this.handleShow()},o.componentDidUpdate=function(e){!(0,s.isVisible)(e.conversation)&&(0,s.isVisible)(this.props.conversation)?this.handleShow():(0,s.isVisible)(e.conversation)&&!(0,s.isVisible)(this.props.conversation)&&this.handleHide()},o.handleShow=function(){this.props.onShow(this.getHeight())},o.handleHide=function(){this.props.onHide()},o.getHeight=function(){return this.ref?this.ref.clientHeight:0},o.render=function(){return(0,s.isVisible)(this.props.conversation)?i.default.createElement("div",{ref:this.setRef,className:"intercom-borderless-conversation-composer"},i.default.createElement(a.default,l({isBorderless:!0},this.props))):null},r}(i.PureComponent);t.default=n},1253:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),a=(o=r(14))&&o.__esModule?o:{default:o},c=r(48),l=r(1113),u=r(1115),s=r(1254);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return p(d(e=n.call.apply(n,[this].concat(r))||this),"isPartBeingAddedTimeout",void 0),p(d(e),"borderlessBodyNode",void 0),p(d(e),"visibleScrollbarsInOs",0!==(0,s.getScrollbarWidth)()),p(d(e),"state",{isPartBeingAdded:!1,bottomScrollOffset:0,frameOffsetTop:e.props.frameNode.offsetTop,adminWasTyping:!1}),p(d(e),"recalculateOffsets",function(){e.setState({frameOffsetTop:e.props.frameNode.offsetTop},function(){return(0,c.scrollToBottom)(e.borderlessBodyNode)})}),p(d(e),"handleScroll",function(){e.state.isPartBeingAdded||e.setState({bottomScrollOffset:(0,c.bottomScrollOffset)(e.borderlessBodyNode)})}),e}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){(0,c.addEventListener)(window.parent,"resize",this.recalculateOffsets)},o.componentDidUpdate=function(e){var t=this,r=this.state.frameOffsetTop,o=this.props,n=o.conversation,i=o.frameNode,a=e.conversation,s=n.parts.length!==a.parts.length,l=(0,u.shouldShowAdminIsTyping)(n);(s||l&&!this.state.adminWasTyping)&&((0,c.scrollToBottom)(this.borderlessBodyNode),this.setState({isPartBeingAdded:!0,bottomScrollOffset:0}),clearTimeout(this.isPartBeingAddedTimeout),this.isPartBeingAddedTimeout=setTimeout(function(){t.setState({isPartBeingAdded:!1}),(0,c.scrollToBottom)(t.borderlessBodyNode)},300)),i.offsetTop!==r&&this.setState({frameOffsetTop:i.offsetTop},function(){t.setState({bottomScrollOffset:(0,c.bottomScrollOffset)(t.borderlessBodyNode)})}),l!==this.state.adminWasTyping&&this.setState({adminWasTyping:l})},o.componentWillUnmount=function(){clearTimeout(this.isPartBeingAddedTimeout),(0,c.removeEventListener)(window.parent,"resize",this.recalculateOffsets)},o.getStyle=function(){var e=this.props,t=e.borderlessNode,r=e.composerHeight,o=t&&t.clientHeight,n=this.state.frameOffsetTop;if(o&&!n){var i=o/100,a=100-10/i,s="linear-gradient(to bottom, rgb(0, 0, 0), rgb(0, 0, 0) "+(100-76/i)+"%, rgba(0, 0, 0, "+Math.max(1-this.state.bottomScrollOffset/100*5,0)+") "+a+"%)";return{maxHeight:o-r-l.PARTS_BODY_PADDING+"px",WebkitMaskImage:s,MaskImage:s}}},o.getClassName=function(){return(0,a.default)({"intercom-borderless-conversation-body":!0,"intercom-borderless-conversation-body-enable-scroll":0===this.state.frameOffsetTop,"intercom-borderless-conversation-body-visible-scrollbars":this.visibleScrollbarsInOs})},o.render=function(){var t=this;return i.default.createElement("div",{className:this.getClassName(),style:this.getStyle(),ref:function(e){return t.borderlessBodyNode=e},onScroll:this.handleScroll},this.props.children())},r}(i.Component);t.default=n},1254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getScrollbarWidth=function(){var e=window.parent.document,t=e.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",e.body.appendChild(t);var r=t.offsetWidth;t.style.overflow="scroll";var o=e.createElement("div");o.style.width="100%",t.appendChild(o);var n=o.offsetWidth;return t.parentNode.removeChild(t),r-n}},1256:function(e,t,r){"use strict";e.exports={openBorderlessConversation:function(e){return{type:"OPEN_BORDERLESS_CONVERSATION",conversationId:e}}}},1257:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BorderlessStyledFrame=void 0;var o,n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),i=(o=r(451))&&o.__esModule?o:{default:o},a=r(418);var s={name:"n7pinj",styles:"min-height:350px;"},l=(0,n.default)(i.default)("z-index:",(0,a.zIndex)()," !important;position:fixed !important;width:360px !important;",function(e){var t=e.theme;return(0,n.css)("bottom:",t.verticalPadding-t.borderlessIframePadding,"px;right:",t.horizontalPadding-t.borderlessIframePadding,"px;max-height:calc(100% - ",t.verticalPadding-t.borderlessIframePadding,"px);")}," ",function(e){return e.isPopoverOpen&&s}," ",function(e){var t=e.theme;return t.isLeftAlign&&(0,n.css)("left:",t.borderlessIframePadding+t.horizontalPadding-t.borderlessIframePaddingLeft+t.borderlessAvatarOffsetWidth,"px;right:auto;")}," ",function(e){var t=e.theme;return t.isLauncherEnabled&&(0,n.css)("bottom:",t.verticalPadding+t.launcherOffsetBottomPadding-t.borderlessIframePadding,"px;max-height:calc( 100% - ",t.verticalPadding+t.launcherOffsetBottomPadding-t.borderlessIframePadding,"px );")});t.BorderlessStyledFrame=l},1258:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.mapDispatchToProps=t.mapStateToProps=void 0;var o,n=r(42),i=(o=r(1259))&&o.__esModule?o:{default:o};var a=r(62),s=r(182).getConversation,l=r(183).openConversation,c=r(720),u=c.openMessage,d=c.recordMessageSent,p=r(452).dismissNotifications,f=r(445),h=function(e){return{appName:e.app.name,conversations:f(e)}};t.mapStateToProps=h;var m=function(i){return{onNotificationClick:function(e){var t=e.id,r=e.parts,o=r[r.length-1],n=o.messageType;-1<[void 0,"chat","link","notificationChannels","video"].indexOf(n)?(i(l(t)),i(s(a,t))):i(u(t,o.id))},onNotificationDismiss:function(e){i(p(a,e))},onDisplayNotifications:function(e){e.forEach(function(e){var t=e.id,r=e.parts,o=r[r.length-1];i(d(t,o.id))})}}};t.mapDispatchToProps=m;var v=(0,n.connect)(h,m)(i.default);t.default=v},1259:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),a=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),s=r(176),l=n(r(1260)),i=r(43),c=n(r(794)),u=n(r(727)),d=r(730),p=n(r(14));function n(e){return e&&e.__esModule?e:{default:e}}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(o){var e,t;function r(){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return h(f(n=o.call.apply(o,[this].concat(t))||this),"handleDismiss",function(){var e=n.props,t=e.onNotificationDismiss,r=e.conversations.map(function(e){return e.id});n.addDismissMetrics(r),t(r);var o=(0,d.launcherFirstFocusableElement)();o&&o.focus()}),h(f(n),"getDismissButtonClassName",function(){return(0,p.default)({"intercom-notifications-dismiss-button":!0,"intercom-notifications-dismiss-button-visible":n.isTouchScreenDevice()})}),n}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.componentDidMount=function(){var e=this.props.onDisplayNotifications,t=this.getSortedConversations();this.focusTrap=new u.default({document:this.props.frameWindow.document}),e(t)},n.componentWillUnmount=function(){this.focusTrap&&this.focusTrap.restore()},n.addDismissMetrics=function(e){var t=this.context.addMetric;e.forEach(function(e){t("closed","message","in_app","from_snippet",{conversation_id:e})})},n.getSortedConversations=function(){return this.props.conversations.slice(-3).sort(function(e,t){return e.lastPartCreatedAt>t.lastPartCreatedAt})},n.isTouchScreenDevice=function(){return"ontouchstart"in window||0<navigator.maxTouchPoints},n.renderDismissButton=function(){var e=1===this.props.conversations.length?(0,i.translate)("clear"):(0,i.translate)("clear_all");return a.default.createElement("button",{className:this.getDismissButtonClassName(),onClick:this.handleDismiss,tabIndex:"0"},e,a.default.createElement("span",{className:"intercom-notifications-dismiss-button-icon"}))},n.render=function(){var e=this.getSortedConversations(),t=this.props,r=t.frameWindow,o=t.appName,n=t.onNotificationClick,i=1<e.length;return a.default.createElement("div",{className:"intercom-notifications"},0<e.length?this.renderDismissButton():null,a.default.createElement(s.TransitionGroup,null,e.map(function(e){return a.default.createElement(s.CSSTransition,{key:e.id,classNames:"intercom-snippet",timeout:{enter:200,exit:200}},a.default.createElement(l.default,{conversation:e,stack:i,appName:o,onClick:n}))})),a.default.createElement(c.default,{appWindow:r}))},r}(a.Component);(t.default=m).propTypes={appName:o.default.string.isRequired,frameWindow:o.default.any.isRequired,conversations:o.default.array.isRequired,onNotificationClick:o.default.func.isRequired,onNotificationDismiss:o.default.func.isRequired,onDisplayNotifications:o.default.func.isRequired},m.contextTypes={addMetric:o.default.func.isRequired}},1260:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),i=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),a=n(r(1058)),s=n(r(1063)),l=n(r(1060)),c=n(r(1079)),u=r(724),d=r(59),p=n(r(1082)),f=n(r(719));function n(e){return e&&e.__esModule?e:{default:e}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(n){var e,t;function r(){for(var o,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m(h(o=n.call.apply(n,[this].concat(t))||this),"addSnippetMetric",function(e){var t=o.props.conversation,r=(0,d.messageOrAdminReply)(t);o.context.addMetric(e,"snippet","in_app","",{conversation_id:t.id,part_id:r.id,part_type:r.messageType})}),m(h(o),"addClickedMetric",function(){o.addSnippetMetric("clicked")}),m(h(o),"handleClick",function(){var e=o.props,t=e.conversation,r=e.onClick;o.addClickedMetric(),r(t)}),o}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.componentDidMount=function(){this.addSnippetMetric("received")},o.shouldRenderChatStyle=function(){var e=this.props,t=e.conversation,r=e.stack;return((0,d.isChatMessage)(t)||(0,d.isAdminReply)(t))&&!r},o.getConversationParts=function(){return this.props.conversation.parts.filter(function(e){return!1===(0,f.default)(e.partType)})},o.renderBody=function(e){if(1===e.length&&(0,u.isStickerBlock)(e[0]))return i.default.createElement(p.default,{text:(0,u.getStickerText)(e[0])});var t=(0,u.getSummaryContext)(this.getConversationParts()).summaryText;return i.default.createElement(a.default,{text:t})},o.renderPlainStyle=function(e,t,r,o){var n=this;return i.default.createElement("div",{className:"intercom-notification"},i.default.createElement("div",{className:"intercom-snippet",onClick:n.handleClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&n.handleClick(e)},role:"button",tabIndex:"0"},i.default.createElement(s.default,{appName:r,author:e,isReplyStyle:o},i.default.createElement("div",{className:"intercom-snippet-body"},this.renderBody(t)))))},o.renderChatStyle=function(e,t,r,o){var n=this;return i.default.createElement("div",{className:"intercom-notification"},i.default.createElement("div",{className:"intercom-chat-snippet",onClick:n.handleClick,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&n.handleClick(e)},role:"button",tabIndex:"0"},i.default.createElement("div",{className:"intercom-chat-snippet-avatar"},i.default.createElement(l.default,{author:e})),i.default.createElement("div",{className:"intercom-chat-snippet-card"},i.default.createElement(c.default,{author:e,appName:r,isReplyStyle:o}),i.default.createElement("div",{className:"intercom-snippet-body intercom-chat-snippet-body"},this.renderBody(t)))))},o.render=function(){var e=this.props,t=e.appName,r=e.conversation.userParticipated,o=(0,d.getLastAdminPart)(this.props.conversation);if(!o)return null;var n=o.author,i=o.body;return this.shouldRenderChatStyle()?this.renderChatStyle(n,i,t,r):this.renderPlainStyle(n,i,t,r)},r}(i.Component);(t.default=v).defaultProps={stack:!1},v.propTypes={conversation:o.default.shape({id:o.default.any.isRequired,parts:o.default.arrayOf(o.default.shape({author:o.default.object.isRequired,body:o.default.array.isRequired})).isRequired,userParticipated:o.default.bool.isRequired}).isRequired,appName:o.default.string.isRequired,stack:o.default.bool.isRequired,onClick:o.default.func.isRequired},v.contextTypes={addMetric:o.default.func.isRequired}},1261:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationsStyledFrame=void 0;var o,n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),i=(o=r(451))&&o.__esModule?o:{default:o},a=r(418);var s=(0,n.default)(i.default)("position:fixed;bottom:",(0,a.getBottomPadding)(),"px;right:",(0,n.theme)("horizontalPadding"),"px;z-index:",(0,a.zIndex)(),";",function(e){var t=e.width,r=e.height;return(0,n.css)("width:",t+10,"px;height:",r+5,"px;")}," ",function(e){var t=e.theme;return t.isLeftAlignment&&(0,n.css)("left:",t.horizontalPadding,"px;right:auto;")});t.NotificationsStyledFrame=s},1262:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeMessage=t.openMessage=void 0;t.openMessage=function(e,t){return{type:"OPEN_POINTER_MESSAGE",conversationId:e,partId:t}};t.closeMessage=function(){return{type:"CLOSE_POINTER_MESSAGE"}}},1263:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(r(22)),d=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),p=n(r(1264)),f=n(r(725)),h=n(r(1109)),a=n(r(1267)),m=r(724),v=r(1269);function n(e){return e&&e.__esModule?e:{default:e}}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(e){c(t,e,r[e])})}return t}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=function(o){var e,t;function r(){for(var i,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return c(l(i=o.call.apply(o,[this].concat(t))||this),"state",{width:0,height:0,placement:null,hasClickedOverlay:!1}),c(l(i),"handleDimensionFrameSize",function(e){var t=e.height,r=e.width;i.setState({width:r,height:t})}),c(l(i),"trackingKey",function(e){return i.props.isPreviewingTour?e+"_preview":e}),c(l(i),"handleOnTourContinue",function(){var e=i.props,t=e.onContinue,r=e.activeStepIndex,o=e.stepCount;e.activeStep.selector&&i.setState({width:0,height:0}),t();var n=r+1===o?"done":"next";i.context.addMetric("clicked",n,i.trackingKey("tour"),null,i.trackingMetadata())}),c(l(i),"handleOnTourStop",function(){var e=i.props.onStop;i.context.addMetric("clicked","stop",i.trackingKey("tour"),null,i.trackingMetadata()),e()}),c(l(i),"handleMissingCssSelector",function(){var e=i.props,t=e.activeStep,r=e.onFailure,o=e.isPreviewingTour;t.selector&&(i.context.addMetric("css_selector_match_failed",i.trackingKey("tour_step"),"positioner",null,s({},i.trackingMetadata(),i.activeStepSelectorMetadata())),o||r())}),c(l(i),"handleSelectorMatch",function(){i.context.addMetric("css_selector_match_success",i.trackingKey("tour_step"),"positioner",null,i.trackingMetadata())}),c(l(i),"handleTourStepLoad",function(){var e=i.props,t=e.stepCount,r=e.activeStepIndex,o=e.onComplete;r+1===t&&o(),i.context.addMetric("viewed",i.trackingKey("tour_step"),"tour",null,i.trackingMetadata())}),c(l(i),"handleOverlayClick",function(){i.context.addMetric("clicked",i.trackingKey("outside_tour_step"),"tour",null,i.trackingMetadata()),i.setState({hasClickedOverlay:!0})}),c(l(i),"resetOverlayClick",function(){i.setState({hasClickedOverlay:!1})}),c(l(i),"handleTargetClick",function(){i.isClickToProgress()&&i.handleOnTourContinue()}),c(l(i),"handlePlacementChange",function(e){i.setState({placement:e})}),c(l(i),"isClickToProgress",function(){return"click"===i.props.activeStep.progressionBehavior}),c(l(i),"getOverlayRenderer",function(){if(i.isClickToProgress())return i.clickToProgressOverlayRenderer}),c(l(i),"clickToProgressOverlayRenderer",function(e,t,r){var o=t.appWindow;return r?d.default.createElement(a.default,{onClick:e,targetNode:r,appWindow:o}):null}),i}t=o,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var n=r.prototype;return n.getFrameDimensions=function(){var e=this.state;return{width:e.width,height:e.height}},n.trackingMetadata=function(){var e=this.props,t=e.activeTourId,r=e.activeStep,o=e.activeStepIndex,n=e.stepCount;return{tour_id:t,tour_step_id:r.id,active_step_index:o,step_count:n}},n.activeStepSelectorMetadata=function(){var e=this.props.activeStep,t=!1;if(e.selectors.auto_secondary)try{t=null!=window.parent.document.querySelector(e.selectors.auto_secondary)}catch(e){}return s({},e.selectors,{secondary_currently_matches:t})},n.positionerKey=function(){var e=this.props.activeStep;return e.selector?"tour-step-"+e.id:"tour-step-post"},n.render=function(){var e=this,t=this.props,r=t.appWindow,o=t.appName,n=t.author,i=t.activeStep,a=t.stepCount,s=t.activeStepIndex,l=this.state.placement,c=!!i.selector,u=(0,m.isSingleVideoFileBlock)(i.blocks);return d.default.createElement(h.default,{appWindow:r,scrollable:!0,targetSelector:i.selector,childDimensions:this.getFrameDimensions(),renderFallback:!0,key:this.positionerKey(),onMissingSelector:this.handleMissingCssSelector,onSelectorMatch:this.handleSelectorMatch,onOverlayClick:this.handleOverlayClick,onTargetClick:this.handleTargetClick,onPlacementChange:this.handlePlacementChange,hideArrow:u,renderOverlay:this.getOverlayRenderer(),shouldAnimate:this.isClickToProgress()},d.default.createElement(v.TourFrameStyled,{style:this.getFrameDimensions(),frameName:"intercom-tour-frame",className:"intercom-tour-frame",isVideo:u},function(){return d.default.createElement(f.default,{id:"tour-frame",key:"tour-frame",onChange:e.handleDimensionFrameSize},d.default.createElement(p.default,{appWindow:r,appName:o,author:n,step:i,activeStepIndex:s,stepCount:a,hasSelector:c,onLoad:e.handleTourStepLoad,onContinue:e.handleOnTourContinue,onStop:e.handleOnTourStop,placement:l,hasClickedOverlay:e.state.hasClickedOverlay,resetOverlayClick:e.resetOverlayClick}))}))},r}(d.PureComponent);(t.default=i).contextTypes={addMetric:o.default.func}},1264:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var f=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),i=o(r(14)),h=o(r(1059)),m=o(r(1067)),v=r(43),y=o(r(1063)),g=o(r(857)),b=o(r(1123)),a=r(724),u=o(r(1265));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var n=function(n){var e,t;function r(){for(var t,e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return l(s(t=n.call.apply(n,[this].concat(r))||this),"node",void 0),l(s(t),"state",{isScrolled:!1}),l(s(t),"handleScroll",function(e){t.setState({isScrolled:0<e.target.scrollTop})}),l(s(t),"handleOnCloseClick",function(){t.props.onStop()}),t}t=n,(e=r).prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t;var o=r.prototype;return o.getClassNames=function(){return(0,i.default)({"intercom-tour-step":!0,"intercom-tour-step-pointer":this.props.hasSelector,"intercom-tour-step-post":!this.props.hasSelector,"intercom-pointer-scrolled":this.state.isScrolled})},o.calculateWidth=function(){var e=this.props.appWindow.innerWidth;return Math.min(624,e)-80},o.getStyles=function(){if(!this.props.hasSelector)return{width:this.calculateWidth()+"px"}},o.onLoad=function(){this.props.onLoad&&this.props.onLoad()},o.componentDidUpdate=function(e){this.props.step.id!==e.step.id&&this.onLoad()},o.componentDidMount=function(){this.props.onLoad()},o.renderVideoTourStep=function(){var e=this.props,t=e.onContinue,r=e.activeStepIndex,o=e.stepCount,n=e.placement,i=e.step,a=i.blocks,s=i.progressionBehavior,l=e.hasClickedOverlay,c=e.resetOverlayClick;return n?f.default.createElement(u.default,{block:a[0],placement:n,activeStepIndex:r,stepCount:o,onClose:this.handleOnCloseClick,onContinue:t,hasClickedOverlay:l,resetOverlayClick:c,progressionBehavior:s}):null},o.renderTourStep=function(){var t=this,e=this.props,r=e.onContinue,o=e.activeStepIndex,n=e.stepCount,i=e.author,a=e.appName,s=e.step,l=s.blocks,c=s.progressionBehavior,u=s.id,d=e.hasClickedOverlay,p=e.resetOverlayClick;return f.default.createElement(y.default,{appName:a,isReplyStyle:!1,author:i},f.default.createElement("div",{className:"intercom-tour-step-header"},f.default.createElement("span",{className:"intercom-tour-close",onClick:t.handleOnCloseClick,"aria-label":(0,v.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&t.handleOnCloseClick(e)},role:"button",tabIndex:"0"},f.default.createElement(g.default,null))),f.default.createElement("div",{className:"intercom-tour-step-content"},f.default.createElement(m.default,{onScroll:this.handleScroll},f.default.createElement(h.default,{blocks:l,key:"tour-step-block-"+u}))),1<n?f.default.createElement(b.default,{activeStepIndex:o,stepCount:n,onContinue:r,progressionBehavior:c,hasClickedOverlay:d,resetOverlayClick:p}):null)},o.render=function(){var t=this,e=this.props.step.blocks;return f.default.createElement("div",{ref:function(e){return t.node=e},className:this.getClassNames(),style:this.getStyles()},(0,a.isSingleVideoFileBlock)(e)?this.renderVideoTourStep():this.renderTourStep())},r}(f.Component);t.default=n},1265:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.videoTourStepSelector=void 0;var o,n=r(42),i=(o=r(1266))&&o.__esModule?o:{default:o},a=r(464),s=r(797);var l=(0,r(33).createSelector)(s.videoAudioMutedSelector,s.userHasInteractedWithVideoSelector,function(e,t){return{muted:e,userHasInteractedWithVideo:t}});t.videoTourStepSelector=l;var c=(0,n.connect)(l,{changeVideoMuted:a.changeVideoMuted})(i.default);t.default=c},1266:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.block,r=t.url,o=t.captions,n=e.placement,i=e.activeStepIndex,a=e.stepCount,s=e.onClose,l=e.onContinue,c=e.muted,u=e.changeVideoMuted,d=e.userHasInteractedWithVideo,p=e.hasClickedOverlay,f=e.resetOverlayClick,h=e.progressionBehavior,m=(0,x.useState)(!0),v=m[0],y=m[1],g=(0,x.useState)(),b=g[0],O=g[1],C=(0,x.useState)(!1),w=C[0],_=C[1],P=function(){c&&O(0),u(!c)},S=function(e){e.target.classList.contains("intercom-tour-step-video-overlay")&&P(),_(!0)},k=(0,T.default)("intercom-tour-step-video","intercom-tour-step-video-placement-"+n,{"intercom-tour-step-video-complete":!v}),E=(0,T.default)("intercom-tour-step-video-overlay",{"intercom-tour-step-video-overlay-hidden":w});return x.default.createElement("div",{className:k},x.default.createElement("div",{className:"intercom-tour-step-video-mask"},x.default.createElement("div",{className:"intercom-tour-step-video-inner"},x.default.createElement(j.default,{srcUrl:r,captions:c?o:void 0,showControls:!1,onComplete:function(){y(!1)},onReplay:function(){return y(!0)},muted:c,startTime:b,loop:!d}),x.default.createElement("div",{className:E,onClick:S,onMouseMove:function(){return _(!1)},onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&S(e)},role:"button",tabIndex:"0"},x.default.createElement("span",{className:"intercom-tour-close",onClick:s,"aria-label":(0,R.translate)("close"),onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&s(e)},role:"button",tabIndex:"0"},x.default.createElement(I.default,null)),v&&x.default.createElement(N,{muted:c,onClick:P}),1<a?x.default.createElement(M.default,{activeStepIndex:i,stepCount:a,onContinue:l,hasClickedOverlay:p,resetOverlayClick:f,progressionBehavior:h}):null))))};var x=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(1)),M=o(r(1123)),j=o(r(1100)),T=o(r(14)),R=r(43),I=o(r(857));function o(e){return e&&e.__esModule?e:{default:e}}function N(e){var t=e.muted,r=e.onClick,o="intercom-video-control-audio-"+(t?"muted":"unmuted");return x.default.createElement("div",{className:o,onClick:r,onKeyDown:function(e){return(13===e.keyCode||32===e.keyCode)&&r(e)},role:"button",tabIndex:"0"})}},1267:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.onClick,r=e.appWindow,o=(p=e.targetNode,f=r,h=p.getBoundingClientRect(),m=h.left,v=h.right,y=h.top,g=h.bottom,b=f.pageXOffset,O=f.pageYOffset,{left:m+=b,right:v+=b,top:y+=O,bottom:g+=O}),n=o.left,i=o.right,a=o.top,s=o.bottom,l=(c=r.document,u=c.body,d=c.documentElement,u&&d?Math.max(u.scrollHeight,u.offsetHeight,d.clientHeight,d.scrollHeight,d.offsetHeight):0);var c,u,d;var p,f,h,m,v,y,g,b,O;return C.default.createElement(C.default.Fragment,null,C.default.createElement(w.TourStepPageOverlayStyled,{style:{top:0,left:0,right:0,height:a},tabIndex:"-1",onClick:t}),C.default.createElement(w.TourStepPageOverlayStyled,{style:{top:a,left:0,width:n,height:s-a},tabIndex:"-1",onClick:t}),C.default.createElement(w.TourStepPageOverlayStyled,{style:{top:a,left:i,right:0,height:s-a},tabIndex:"-1",onClick:t}),C.default.createElement(w.TourStepPageOverlayStyled,{style:{top:s,left:0,right:0,bottom:0,height:l-s},tabIndex:"-1",onClick:t}))};var o,C=(o=r(1))&&o.__esModule?o:{default:o},w=r(1268)},1268:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TourStepPageOverlayStyled=void 0;var o,n=(o=r(17))&&o.__esModule?o:{default:o},i=r(418);var a=n.default.div("position:absolute;z-index:",(0,i.zIndex)(),";");t.TourStepPageOverlayStyled=a},1269:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TourFrameStyled=void 0;var o,n=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};o.get||o.set?Object.defineProperty(t,r,o):t[r]=e[r]}return t.default=e,t}}(r(17)),i=(o=r(451))&&o.__esModule?o:{default:o},a=r(418);var s={name:"1j1kj5x",styles:"border:none;box-shadow:none;"},l=(0,n.default)(i.default)("z-index:",(0,a.zIndex)(1),";border-radius:5px;box-shadow:0 3px 32px 0 rgba(0,0,0,0.14);border:1px solid rgba(0,0,0,0.1);",function(e){return e.isVideo&&s});t.TourFrameStyled=l}}]);